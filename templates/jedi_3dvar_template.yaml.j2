cost function:
  cost type: 3D-Var
  jb evaluation: false
  time window:
    begin: "{{ window_begin }}"
    length: "{{ window_length }}"

  analysis variables:
  - sea_ice_area_fraction
  - sea_water_salinity
  - sea_water_potential_temperature
  - sea_surface_height_above_geoid

  geometry:
    geom_grid_file: soca_gridspec.72x35x25.nc
    mom6_input_nml: inputmom6.nml
    fields metadata: fields_metadata.yaml

  background:
    read_from_file: 1
    basename: ./bkg/
    ocn_filename: ocean.nc
    ice_filename: ice.nc
    date: "{{ window_middle }}"
    state variables:
    - sea_ice_area_fraction
    - sea_water_salinity
    - sea_water_potential_temperature
    - sea_surface_height_above_geoid
    - sea_water_cell_thickness
    - sea_water_depth

  background error:
    covariance model: SABER
    saber central block:
      saber block name: ID

  # Observations generated from JCB-GDAS templates
  observations:
    observers:
{% for block in rendered_observer_blocks %}
{{ ("      " ~ block|trim)|replace('\n', '\n      ') ~ '\n' }}
{% endfor %}

variational:
  minimizer:
    algorithm: RPCG
  iterations:
  - ninner: 1
    gradient norm reduction: 1e-5
    test: off
    geometry:
      geom_grid_file: soca_gridspec.72x35x25.nc
      mom6_input_nml: inputmom6.nml
      fields metadata: fields_metadata.yaml

final j evaluation: false
